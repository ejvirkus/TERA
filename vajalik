import pandas as pd
from gmplot import GoogleMapPlotter

# Read GPS coordinates from CSV file
data = pd.read_csv(r"gps_data_tera.csv")

# Extract latitude and longitude columns
lats = data['Latitude']
lngs = data['Longitude']

# Initialize GoogleMapPlotter object with center coordinates and zoom level
gmap = GoogleMapPlotter(lats.mean(), lngs.mean(), 19, map_type='satellite')

# Plot each GPS coordinate as a dot on the map
for lat, lng in zip(lats, lngs):
    gmap.scatter([lat], [lng], color='red', size=0.1, marker = False)

# Save the map to an HTML file
gmap.draw("gps_map_satellite.html")

# Create a new HTML file with automatic refreshing
with open("live_gps_map.html", "w") as file:
    file.write("""
    <!DOCTYPE html>
    <html>
    <head>
        <title>Live GPS Map</title>
        <meta http-equiv="refresh" content="5"> <!-- Refresh the page every 5 seconds -->
    </head>
    <body>
        <iframe src="gps_map_satellite.html" width="100%" height="900px"></iframe>
    </body>
    </html>
    """)
